#: Pre-commit checker to use within git hook `pre-commit`
#:
#: File : .commit-check
#: Description : The code here run to check committed files
#:      before committing.
#:      The code set exitCode=1 if the check result is false
#:      Otherwise exitCode=0 (or doing nothing).
#: OBS! : This file should be located in the root of the repo.
#
#
# Local variables:
#  exitcode
#  GIT_ROOT
#
# 2025 hossjava@osxx.com
#---------------------------------------
# update runner ('ccrun') to the repo runner
#COMMITCHECK_RUNNER=ccrun
#if [ -f "$GIT_ROOT/$COMMITCHECK_RUNNER" ]; then
#    bash -c "source $GIT_ROOT/$COMMITCHECK_RUNNER && ccrun checkattrib -gitcommit" \
#    && exitcode=0
#else
#    exitcode=1
#fi
COMMITCHECK_RUNNER=run-tests
echo "$GIT_ROOT/$COMMITCHECK_RUNNER"
if [ -f "$GIT_ROOT/$COMMITCHECK_RUNNER" ]; then
    bash -c "source $GIT_ROOT/$COMMITCHECK_RUNNER \
        && runtests" \
    && exitcode=$?
else
    exitcode=1
fi
